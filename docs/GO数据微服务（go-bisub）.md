# GO数据微服务（go-bisub） 
GO BI Subscription 订阅BI数据服务；先不要写代码，看见下边的逻辑有什么要问我的吗？ 

## 功能
1. web UI 页面创建订阅服务&变更订阅状态值
```
数据表MySQL8：

创建字段：分步式ID、订阅key、版本号、订阅标题、订阅描述、订阅SQL、订阅sql替换变量、状态、创建人Id、创建时间、修改时间

字段描述：
分步式ID：bigint(20)  主键ID
订阅key：varchar(128) 
版本号： tinyint(3)
订阅标题：varchar(300) 
订阅描述：tinytext
订阅SQL：text
订阅sql替换变量：json格式{"house_id_replace":"房源Id"}
状态: tinyint(3) 0.未知、1.生效中、2.生效中强制替换低版本订阅 3.已失效
创建人Id: bigint(20)
创建时间: timestamp
修改时间: timestamp

表索引：
`uk_订阅key_版本号` (`订阅key`,`版本号`)
```

2. 订阅服务对外API
```
调用订阅API：通过传 订阅key、版本号（默认版本为1） 和 订阅sql替换变量 内容进行API调用

注意：1，将API调用地址、传参内容、执行SQL、SQL执行时间、订阅key、订阅版本号、请求时间；同过异步的方式添加到MySQL8的统计表中注意不要影响API的响应速度
```

3. 订阅服务响应时间统计功能&web UI页面
```
1.可以通过开始和结束时间进行搜索；默认最近7天的数据
2.展示字段 订阅key、版本号、调用次数、平均执行时间、最短执行时间、最长执行时间、执行时间最短的SQL、执行时间最长的SQL，创建人Id；数据通过订阅key、版本号 分组并切平均执行时间倒序
```

4. 代码可以通过docker进行打包发版
